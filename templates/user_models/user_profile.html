{% extends 'base_templates/base.html' %}
{% block title %} News {% endblock %}

{% block navbar %}
    {% if request.user.is_authenticated %}
        {% include 'base_templates/navbar_loggedin.html' %}
    {% else %}    
        {% include 'base_templates/navbar_notloggedin.html' %}
    {% endif %}
{% endblock %}


{% block body %}
    <div class="mt-5"></div>
    <div class="banner" style="height: 30vh; background-image: url({{banner}});"">

    </div>
    <div class="banner row mt-5">
        <div class="col-4 bg-light border-end display-flex ">
            <h1 class="display-4 fw-bold">{{user.first_name | capfirst}}</h1>
            <h1 class="display-4 fw-bold">{{user.last_name | capfirst}}</h1>
            <h5 class="text-primary">@{{user.username}} <span class="badge badge-primary">{{user.designation}}</span></h5>
            <span class="text-muted fs-6">Department:</span> <span class="fs-4 fw-bold">{{user.department}}</span>
        </div>
    </div>

    <div class="row mt-5">

        <!-- Pills navs -->
<ul class="nav nav-pills mb-3" id="ex1" role="tablist">
    <li class="nav-item" role="presentation">
      <a
        class="nav-link active"
        id="ex1-tab-1"
        data-mdb-toggle="pill"
        href="#ex1-pills-1"
        role="tab"
        aria-controls="ex1-pills-1"
        aria-selected="true"
        >News</a
      >
    </li>
    <li class="nav-item" role="presentation">
      <a
        class="nav-link"
        id="ex1-tab-2"
        data-mdb-toggle="pill"
        href="#ex1-pills-2"
        role="tab"
        aria-controls="ex1-pills-2"
        aria-selected="false"
        >Posts</a
      >
    </li>
  </ul>
  <hr>
  <!-- Pills navs -->
  
  <!-- Pills content -->
  <div class="tab-content" id="ex1-content">
    <div
      class="tab-pane fade show active"
      id="ex1-pills-1"
      role="tabpanel"
      aria-labelledby="ex1-tab-1"
    >
        <div class="display-6">
            All news by {{user.username|capfirst}}
        </div>
        <div class="row row-cols-1 mt-3 row-cols-md-1 w-50 g-4">
          {% for news in all_news %}
          <div class="card rounded-0 text-white" style="background-color:#404258;">
              <div class="card-header">
                  <div class="text-muted fs-6">  
                      <a href="{% url 'user_profile' news.posted_by %}" class="badge rounded-0 badge-light fs-6">{{news.posted_by.first_name | capfirst}} {{news.posted_by.last_name | capfirst}} </a>
                      <span class="lead fs-6">{{news.posted_date | date:"D d M Y"}}  </span>
                  </div>
              </div>
              <div class="card-body">
                  <p class="card-text">
                      <span class="card-title h4 fw-bold">{{news.headline | truncatechars:64}}.</span>
                      {{news.content|truncatechars:256}}</p>
                      <a href="{% url 'view_news' news.news_id %}" class="btn btn-primary">View Story</a>
                      
                      {% if user.designation == 'FACULTY' and user.is_elevated %}
                      <a href="{% url 'delete_news' news.news_id%}" class="btn btn-danger">Delete News</a>
                      {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
    </div>
    <div class="tab-pane fade" id="ex1-pills-2" role="tabpanel" aria-labelledby="ex1-tab-2">
      Tab 2 content
    </div>
  </div>
  <!-- Pills content -->
    </div>

{% endblock %}